/*!
 * Deep-link.js
 * https://timseverien.com/projects/deep-link/
 *
 * Copyright 2016
 * Released under MIT license
 */
!function(e,t){"function"==typeof define&&define.amd?define([],t):e.deepLink=t()}(this,function(){"use strict";function e(){for(var e=document.getElementsByTagName("a"),t=e.length;t--;)s(e[t])}function t(){return{init:e}}var n=1200,i={windows:{store_prefix:"zune:navigate?appid=",test:/Windows\s+Phone|IEMobile/i},android:{store_prefix:"https://play.google.com/store/apps/details?id=",test:/Android/i},iOS:{store_prefix:"https://itunes.apple.com/en/app/id",test:/iPhone|iPad|iPod/i}},r=function(){var e;for(e in i)if(navigator.userAgent.match(i[e].test))return e;return""},a=function(){return(new Date).getTime()},o=function(e){window.location.href=e},u=function(e,t,n,i){var r=navigator.userAgent.indexOf("Android")>-1&&navigator.userAgent.indexOf("Mozilla/5.0")>-1&&navigator.userAgent.indexOf("AppleWebKit")>-1,a=new RegExp(/AppleWebKit\/([\d.]+)/),o=a.exec(navigator.userAgent),u=null===o?null:parseFloat(a.exec(navigator.userAgent)[1]),s=r&&null!==u&&u>500;return s?"intent:"+e.split(":")[1]+"#Intent;scheme="+i+";package="+t+";S.browser_fallback_url="+encodeURI(n):e},s=function(e){var t,s,d=r(),f=d.toLowerCase(),p=e.getAttribute("href"),l=e.getAttribute("data-app-"+f)||e.getAttribute("data-app"),c=e.getAttribute("data-store-"+f)||e.getAttribute("data-store"),g=e.getAttribute("data-android-scheme");l&&(p||e.setAttribute("href",l),d&&l?e.onclick=function(e){e.preventDefault(),e.stopImmediatePropagation();var r,f=a();t=!0,s=setTimeout(function(){if(t&&s){var e=a();t=!1,s=null,e-f>=2*n||(c?o(i[d].store_prefix+c):p&&o(p))}},n);var v=u(l,c,p,g);r=o(v)}:p&&"#"!==p||(e.style.display="none"),visibly.onHidden(function(){t&&s&&(s=clearInterval(s),t=!1)}))};return t});