/*!
 * visibly - v0.7 Page Visibility API Polyfill
 * http://github.com/addyosmani
 * Copyright (c) 2011-2014 Addy Osmani
 * Dual licensed under the MIT and GPL licenses.
 *
 * Methods supported:
 * visibly.onVisible(callback)
 * visibly.onHidden(callback)
 * visibly.hidden()
 * visibly.visibilityState()
 * visibly.visibilitychange(callback(state));
 */
!function(){window.visibly={q:document,p:void 0,prefixes:["webkit","ms","o","moz","khtml"],props:["VisibilityState","visibilitychange","Hidden"],m:["focus","blur"],visibleCallbacks:[],hiddenCallbacks:[],genericCallbacks:[],_callbacks:[],cachedPrefix:"",fn:null,onVisible:function(i){"function"==typeof i&&this.visibleCallbacks.push(i)},onHidden:function(i){"function"==typeof i&&this.hiddenCallbacks.push(i)},getPrefix:function(){if(!this.cachedPrefix)for(var i,t=0;i=this.prefixes[t++];)if(i+this.props[2]in this.q)return this.cachedPrefix=i,this.cachedPrefix},visibilityState:function(){return this._getProp(0)},hidden:function(){return this._getProp(2)},visibilitychange:function(i){"function"==typeof i&&this.genericCallbacks.push(i);var t=this.genericCallbacks.length;if(t)if(this.cachedPrefix)for(;t--;)this.genericCallbacks[t].call(this,this.visibilityState());else for(;t--;)this.genericCallbacks[t].call(this,arguments[0])},isSupported:function(i){return this._getPropName(2)in this.q},_getPropName:function(i){return""==this.cachedPrefix?this.props[i].substring(0,1).toLowerCase()+this.props[i].substring(1):this.cachedPrefix+this.props[i]},_getProp:function(i){return this.q[this._getPropName(i)]},_execute:function(i){if(i){this._callbacks=1==i?this.visibleCallbacks:this.hiddenCallbacks;for(var t=this._callbacks.length;t--;)this._callbacks[t]()}},_visible:function(){window.visibly._execute(1),window.visibly.visibilitychange.call(window.visibly,"visible")},_hidden:function(){window.visibly._execute(2),window.visibly.visibilitychange.call(window.visibly,"hidden")},_nativeSwitch:function(){this[this._getProp(2)?"_hidden":"_visible"]()},_listen:function(){try{this.isSupported()?this.q.addEventListener(this._getPropName(1),function(){window.visibly._nativeSwitch.apply(window.visibly,arguments)},1):this.q.addEventListener?(window.addEventListener(this.m[0],this._visible,1),window.addEventListener(this.m[1],this._hidden,1)):this.q.attachEvent&&(this.q.attachEvent("onfocusin",this._visible),this.q.attachEvent("onfocusout",this._hidden))}catch(i){}},init:function(){this.getPrefix(),this._listen()}},this.visibly.init()}(),/*!
 * Deep-link.js
 * https://timseverien.com/projects/deep-link/
 *
 * Copyright 2016
 * Released under MIT license
 */
function(i,t){"function"==typeof define&&define.amd?define(["visibly.js"],t):i.deepLink=t(i.visibly)}(this,function(i){"use strict";function t(){i.init();for(var t=document.getElementsByTagName("a"),e=t.length;e--;)c(t[e])}var e=1200,n={windows:{store_prefix:"zune:navigate?appid=",test:/Windows\s+Phone|IEMobile/i},android:{store_prefix:"https://play.google.com/store/apps/details?id=",test:/Android/i},iOS:{store_prefix:"https://itunes.apple.com/en/app/id",test:/iPhone|iPad|iPod/i}},s=function(){var i;for(i in n)if(navigator.userAgent.match(n[i].test))return i;return""},a=function(){return(new Date).getTime()},o=function(i){window.location.href=i},r=function(i,t,e,n){var s=navigator.userAgent.indexOf("Android")>-1&&navigator.userAgent.indexOf("Mozilla/5.0")>-1&&navigator.userAgent.indexOf("AppleWebKit")>-1,a=new RegExp(/AppleWebKit\/([\d.]+)/),o=a.exec(navigator.userAgent),r=null===o?null:parseFloat(a.exec(navigator.userAgent)[1]),c=s&&null!==r&&r>500;return c?"intent:"+i.split(":")[1]+"#Intent;scheme="+n+";package="+t+";S.browser_fallback_url="+encodeURI(e):i},c=function(t){var c,l,h=s(),d=h.toLowerCase(),u=t.getAttribute("href"),f=t.getAttribute("data-app-"+d)||t.getAttribute("data-app"),p=t.getAttribute("data-store-"+d)||t.getAttribute("data-store"),b=t.getAttribute("data-android-scheme");f&&(u||t.setAttribute("href",f),h&&f?t.onclick=function(i){i.preventDefault(),i.stopImmediatePropagation();var t,s=a();c=!0,l=setTimeout(function(){if(c&&l){var i=a();c=!1,l=null,i-s>=2*e||(p?o(n[h].store_prefix+p):u&&o(u))}},e);var d=r(f,p,u,b);t=o(d)}:u&&"#"!==u||(t.style.display="none"),i.onHidden(function(){c&&l&&(l=clearInterval(l),c=!1)}))};return{init:t}});